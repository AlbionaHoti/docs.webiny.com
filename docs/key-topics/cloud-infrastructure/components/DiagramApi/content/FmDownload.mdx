## Description

The diagram shows what happens every time a client tries to download a binary file.

## Steps
The p
rocess consists of three steps.

1. The client issues a GET `/download/{file-key}` HTTP request, which reaches the Amazon API Gateway <diagram-letter>B</diagram-letter>, which then invokes the File Manager's Download Lambda function <diagram-letter>C</diagram-letter>.
2. The Download Lambda function will extract the file key from the received HTTP request, and then fetch the file from the S3 bucket <diagram-letter>C</diagram-letter>.
3. Finally, as a base64 encoded string, the file is returned to the Amazon API Gateway, which transforms it to an actual binary and sends it back to the Amazon CloudFront.

:::info
Visit the [Working with binary media types for REST APIs](https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-payload-encodings.html) article to learn more about how Amazon API Gateway deals with binary files.
:::

## FAQ

**Who can upload files?**

Only users with proper permissions can perform file uploads. Both authentication and authorization are performed in steps one and three, on the GraphQL Server <diagram-letter>c</diagram-letter>.

**Is there a way to define a maximum file upload size?**

Yes, by going into the File Manager's general settings section, and manually entering the appropriate values.

![noice](./../images/fm_upload/fm-settings.png)
